function init(){makeCalc()}function enable(){console.log("add listeners"),$(".calculator").on("click",".number",insertNumber),$(".calculator").on("click",".operator",setOperation),$(".calculator").on("click",".decimal",addDecimal),$(".calculator").on("click",".clear",resetCalc),$(".calculator").on("click",".equals",performCalc)}function disable(){$(".operator").prop("disabled",!0)}function disableAll(){$(".operator").prop("disabled",!0),$(".number").prop("disabled",!0),$(".decimal").prop("disabled",!0),$(".equals").prop("disabled",!0)}function makeCalc(){$(".calculator").append('<div class="screen well"></div>');for(var a=0;a<buttonArray.length;a++){$(".calculator").append('<div class="buttons container col-xs-4 "></div>');var b=$(".calculator").children().last();b.data("number",buttonArray[a]),b.append('<button class="btn btn-default number">'+buttonArray[a]+"</button>")}for(a=0;a<operatorArray.length;a+=2){$(".calculator").append('<div class="operation container col-xs-4 "></div>');var c=$(".calculator").children().last();c.data("operation",operatorArray[a+1]),c.append('<button class="btn btn-default operator">'+operatorArray[a]+"</button>")}$(".calculator").append('<div class="operation container col-xs-4 "></div>');var d=$(".calculator").children().last();d.append('<button class="btn btn-default decimal">.</button>'),$(".calculator").append('<div class="equal container col-xs-12 "></div>');var e=$(".calculator").children().last();e.append('<button class="btn btn-primary clear">clear</button>'),e.append('<button class="btn btn-success equals">=</button>')}function insertNumber(){var a=$(this).parent().data("number");$(".screen").append("<span>"+a+"</span>")}function setOperation(){var a=$(this).parent().data("operation");type=a,x=$(".screen").text(),console.log("x and type set",x," ",type),$(".screen").empty(),$(this).addClass("selected"),disable()}function addDecimal(){$(".screen").append("<span>.</span>")}function resetCalc(){$(".calculator").empty(),x="",y="",type="",makeCalc()}function performCalc(){console.log("clicked"),y=$(".screen").text(),console.log("x = ",x,"y = ",y," and type is ",type),$(".screen").empty(),0===x.length||0===y.length?($(".screen").append("<span>Error, press clear.try again.</span>"),disableAll()):$.ajax({type:"POST",url:"/math/"+type,data:{x:x,y:y},success:function(a){console.log(a),$(".screen").append("<span>"+a.answer+"</span>"),disableAll()}})}var buttonArray=[1,2,3,4,5,6,7,8,9,0],operatorArray=["+","add","-","sub","*","mult","/","div"],x="",y="",type="";$(document).ready(function(){init(),enable()});